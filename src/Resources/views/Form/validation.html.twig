{% macro library() %}
{% spaceless %}
    {% defer javascript 'form_validate' %}
        {% javascripts
        '@XoipThemeApplicationBundle/Resources/assets/jquery-validate/jquery.validate.js'
        '@XoipThemeApplicationBundle/Resources/assets/xoip/js/jquery.validate.js'
        %}
            <script src="{{ asset_url }}"></script>
        {% endjavascripts %}
    {% enddefer %}
{% endspaceless %}
{% endmacro %}

{% macro form(form_name) %}
{% spaceless %}
    {% if form_name %}
        {% import _self as form_validation %}

        {{ form_validation.library() }}

        {% set form_defer_name = 'defer_' ~ form_name %}
        {% defer javascript form_defer_name %}
        <script>
            $('form[name="{{ form_name }}"]').validate();
        </script>
        {% enddefer %}
    {% endif %}
{% endspaceless %}
{% endmacro %}
